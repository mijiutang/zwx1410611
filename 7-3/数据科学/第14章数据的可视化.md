## 第14章 数据的可视化

### 14.1 概述

美国著名统计学家约翰·图基(图14-1)曾经说过一句话，“一幅图画最伟大的价值莫过于它能够使我们实际看到的比我们期望看到的内容丰富得多”。
维基百科对于数据可视化是这样定义的，“借助于图形化手段，清晰有效地传达与沟通信息”。
可视化的优势之一在于简单，表现清晰，利用人对形状、颜色、运动的敏感，有效地传递信息，帮助用户从数据中发现关系、规律、趋势。
数据可视化一般可以分为两类：

1. **科学可视化**：主要关注的是三维现象的可视化，如建筑学、气象学、医学或生物学方面各种系统。重点在对体、面及光源等的逼真渲染。

![图14-1 约翰·图基](图14-1.png)

| I    | X    | y     | Ⅱ    | X    | y    | Ⅲ    | X    | y     | IV   | X    | y     |
| ---- | ---- | ----- | ---- | ---- | ---- | ---- | ---- | ----- | ---- | ---- | ----- |
|      | 10.0 | 8.04  |      | 10.0 | 9.14 |      | 10.0 | 7.46  |      | 8.0  | 6.58  |
|      | 8.0  | 6.95  |      | 8.0  | 8.14 |      | 8.0  | 6.77  |      | 8.0  | 5.76  |
|      | 13.0 | 7.58  |      | 13.0 | 8.74 |      | 13.0 | 12.74 |      | 8.0  | 7.71  |
|      | 9.0  | 8.81  |      | 9.0  | 8.77 |      | 9.0  | 7.11  |      | 8.0  | 8.84  |
|      | 11.0 | 8.33  |      | 11.0 | 9.26 |      | 11.0 | 7.81  |      | 8.0  | 8.47  |
|      | 14.0 | 9.96  |      | 14.0 | 8.10 |      | 14.0 | 8.84  |      | 8.0  | 7.04  |
|      | 6.0  | 7.24  |      | 6.0  | 6.13 |      | 6.0  | 6.08  |      | 8.0  | 5.25  |
|      | 4.0  | 4.26  |      | 4.0  | 3.10 |      | 4.0  | 5.39  |      | 19.0 | 12.50 |
|      | 12.0 | 10.84 |      | 12.0 | 9.13 |      | 12.0 | 8.15  |      | 8.0  | 5.56  |
|      | 7.0  | 4.82  |      | 7.0  | 7.26 |      | 7.0  | 6.42  |      | 8.0  | 7.91  |
|      | 5.0  | 5.68  |      | 5.0  | 4.74 |      | 5.0  | 5.73  |      | 8.0  | 6.89  |

图14-2 Anscombe的四重奏

2. **信息可视化**：旨在研究大规模非数值型信息资源的视觉呈现，以及利用图形图像方面的技术与方法，帮助人们理解和分析数据。

之所以要进行数据可视化，是因为进入大数据时代，人们需要处理复杂的数据结构，需要应对复杂的数据关系，需要厘清复杂的逻辑分类。可视化方式，可以提供一个更为有效的手段，来帮助人们厘清这些复杂的问题。
图14-2中的数据被称为Anscombe的四重奏。它是1973年由统计学家F.J.Anscombe所构造的。假设，如果单纯从数值分析的角度来看这四组数据。那么应该怎么看?是否要依靠统计学特征?
不妨来算一下这四组数据的统计学特征。经过计算会发现，这四组数据的统计学特征如下：
1. \(x\)值的平均数都是9.0，\(y\)值的平均数都是7.5；
2. \(x\)值的方差都是10.0，\(y\)值的方差都是3.75；
3. 它们的相关度都是0.816，线性回归线都是\(y = 3 + 0.5x\)。

仅从这些统计数字上来看，也许会觉得这四组数据所反映出的实际情况应该非常相近。而事实上，这四组数据有着天壤之别。
来看图14-3，是否一眼就可以看出这四组数据的不同了呢?这就是数据可视化的威力和魅力所在。

![图14-3 Anscombe的四重奏的可视化呈现](示例图位置，实际无直接图片，此为示意)

### 14.2 可视化工具

#### 14.2.1 Excel
Excel的图形化功能并不强大，但Excel是分析数据的理想工具。作为一个入门级工具，Excel是快速分析数据的理想工具，也能创建供内部使用的数据图，但是Excel在颜色、线条和样式上可选择的范围有限，这也意味着用Excel很难制作出能符合专业出版物和网站需要的数据图。

#### 14.2.2 Google Chart API
Google Chart API工具集中取消了静态图片功能，目前只提供动态图表工具。能够在所有支持SVG\Canvas和VML的浏览器中使用，但是Google Chart的一个大问题是，图表在客户端生成，这意味着那些不支持JavaScript的设备将无法使用，此外也无法离线使用或者将结果另存为其他格式，之前的静态图片就不存在这个问题。尽管存在上述问题，不可否认的是，Google Chart API的功能异常丰富，如果没有特别的定制化需要，或者对谷歌视觉风格的抵触，那么大可以从Google Chart开始(图14-4)。

![图14-4 Google Chart API](示例图位置，实际无直接图片，此为示意)

#### 14.2.3 Visual.ly
如果用户需要制作信息图而不仅是数据可视化，目前也有很多的工具可用。Visual.ly就是最流行的一个选择。虽然Visual.ly的主要定位是“信息图设计师的在线集市”，但是也提供了大量信息图模板。虽然功能还有很多限制，但是Visual.ly绝对是个能激发人灵感的地方(图14-6)。

![图14-6 Visual.ly](示例图位置，实际无直接图片，此为示意)

#### 14.2.4 Crossfilter
Crossfilter(图14-7)是一个用来展示大数据集的JavaScript库，支持超快的交互，甚至在上百万或更多数据下都能运行得很快。它主要用来构建数据分析程序。
在使用Crossfilter时，当用户调整一个图表的输入范围时，其他关联图表的数据也会随之改变。

![图14-7 Crossfilter](示例图位置，实际无直接图片，此为示意)

#### 14.2.5 Polymaps
Polymaps(图14-8)是一个可视化的视图模型，可生成多图多变焦的数据集，并提供快速的支持矢量数据的可视化演示，除了通常开放街道地图，还支持CloudMade、微软和其他供应商的基于图像的网络地图制图。

#### 14.2.6 Kartograph
Kartograph(图14-9)是一个构建交互式地图的简单、轻量级类库。它包含两个库，一个用Python编写的，用于产生漂亮和压缩的SVG地图，另一个是Js类库，用于前端展示地图。

![图14-9 Kartograph](示例图位置，实际无直接图片，此为示意)

#### 14.2.7 Processing
Processing是数据可视化的招牌工具。只需要编写一些简单的代码，然后编译成Java就可以了。目前还有一个Processing.js项目，可以使网站在没有Java Applets的情况下更容易地使用Processing。由于端口支持Objective-C，用户也可以在iOS上使用Processing。虽然Processing是一个桌面应用，但也可以在几乎所有平台上运行。此外，经过数年发展，Processing社区目前已拥有大量实例和代码。

![图14-10 Processing编程环境](示例图位置，实际无直接图片，此为示意)

#### 14.2.8 R
R是一套完整的数据处理、计算和制图软件系统。其功能包括数据存储和处理系统、数组运算工具(其向量、矩阵运算方面的功能尤其强大)、完整连贯的统计分析工具、优秀的统计制图功能、简便而强大的编程语言、可操纵数据的输入和输出，可实现分支、循环、自定义功能。
与其说R是一种统计软件，还不如说R是一种数学计算的环境，因为R并不仅提供若干统计程序，还可以方便用户操作，他们只需指定数据库和若干参数便可进行统计分析。对于R，它可以提供一些集成的统计工具，也可以提供各种数学计算、统计计算的函数，从而让使用者能灵活机动地进行数据分析，甚至创造出符合需要的新的统计计算方法。

![图14-11 R语言编程](示例图位置，实际无直接图片，此为示意)

#### 14.2.9 Weka
Weka的全名是怀卡托智能分析环境(Waikato Environment for Knowledge Analysis)，同时Weka也是新西兰的一种鸟名，而Weka的主要开发者来自新西兰。

Weka作为一个公开的数据挖掘工作平台，集合了大量能承担数据挖掘任务的机器学习算法，包括对数据进行预处理、分类、回归、聚类，以及在新的交互式界面上的可视化。

![图14-12 Weka编程环境](示例图位置，实际无直接图片，此为示意)

#### 14.2.10 Gephi
Gephi是一款基于JVM的开源免费跨平台复杂网络分析软件，它是主要用于各种网络和复杂系统的动态和分层图的交互可视化与探测开源工具。可用作探索性数据分析、链接分析、社交网络分析、生物网络分析等。

![图14-13 利用Gephi做数据可视化](示例图位置，实际无直接图片，此为示意) 

Gephi 不但能处理大规模数据集并生成漂亮的可视化图形，还能对数据进行清洗和分类。 Gephi 是一种非常特殊的软件，也非常复杂(图14-13)。
